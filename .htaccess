RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^api/([^/]+)/$ api/$1.php [L]
RewriteRule ^api/([^/]+)$ api/$1.php [L]

# Set JSON content type for API responses
<IfModule mod_headers.c>
    <FilesMatch "^api/.+\.php$">
        Header set Content-Type "application/json"
    </FilesMatch>
</IfModule>

# Protect config.php from direct access
<Files "config.php">
    Order Allow,Deny
    Deny from all
</Files>